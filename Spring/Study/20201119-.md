# 스프링 지능형웹 (1) R그래프, 프로시저 게시판

## R
- X64클릭하기
- install.packages("rJava")
  - 코리아- 서울
- install.packages("Rserve")
- install.packages("KoNLP")
  - 실패
  
- 

```r
install.packages("multilinguer")
library(multilinguer)
install_jdk()
install.packages(c('stringr', 'hash', 'tau', 'Sejong', 'RSQLite', 'devtools'), type = "binary")
install.packages("remotes")
remotes::install_github('haven-jeon/KoNLP', upgrade = "never", INSTALL_opts=c("--no-multiarch"))
library(KoNLP)
```

> library("rJava")
> library("Rserve")
> library("KoNLP")

- [문서\R\win-library\4.0\Rserve\libs\x64]에 있는 Rserve 파일을 [Program Files\R\R-4.03\bin] 에 붙여넣기

- 서버 연결
- c:\Program Files\R\R-4.0.3\bin>R.exe CMD Rserve.exe

- data<-read.csv("c:/upload/emp.csv",header=T,sep=",")
barplot(data$sal,names=data$ename,col
## Spring

### pom.xml  , web.xml 셋팅

### list.jsp
- 리얼패스 받기 : `<%=application.getRealPath("/") %>` 작성 후 서버 구동

### EmpMapper
- empListData : emp테이블 데이터 조회

### EmpDAO
- empListData 연결접속 후 실행하기

### EmpController.java
- emp/list.do 요청이 들어오면 emp/list 반환하기

- FileWriter 클래스 : 문자 기반 스트림으로 텍스트 데이터를 파일에 저장할 때 사용. 문자 단위로 저장하므로 텍스트만 저장 가능

  - 생성 방법 : `FileWriter fw = new FileWriter("파일경로");`
  - `FileWriter fw = new FileWriter("파일경로", true);` : 지정된 파일이 이미 있을 경우, 기존 파일 내용 끝에 데이터를 추가할 경우 두번 째 매개값에 true를 준다.
  - `fw.write(csv)` :  파일안에 문자열 쓰기

- csv : 쉼표로 구분되어 있는 엑셀 파일

### list.jsp

```jsp
<div class="row">
			<img src="emp.png" width=100%>
</div>
```

### RManager

- `header=T` : `"empno,ename,sal\n";` 가 존재한다


### EmpController


## 프로시저와 함수만으로 게시판 만들기

### DB 테이블 제작

- 게시판 테이블

```oracle
CREATE TABLE project_board(
    no NUMBER,
    name VARCHAR2(34) CONSTRAINT pb_name_nn NOT NULL,
    subject VARCHAR2(1000) CONSTRAINT pb_sub_nn NOT NULL,
    content CLOB CONSTRAINT pb_cont_nn NOT NULL,
    pwd VARCHAR2(10) CONSTRAINT pb_pwd_nn NOT NULL,
    regdate DATE DEFAULT SYSDATE,
    hit NUMBER DEFAULT 0,
    CONSTRAINT pb_no_pk PRIMARY KEY(no)
);
```

- 새글 삽입 프로시저

```SQL
CREATE OR REPLACE PROCEDURE projectBoardInsert(
    pName project_board.name%TYPE,
    pSubject project_board.subject%TYPE,
    pContent project_board.content%TYPE,
    pPwd project_board.pwd%TYPE
)
IS
BEGIN
    INSERT INTO project_board(no,name,subject,content,pwd)
    VALUES((SELECT NVL(MAX(no)+1,1) FROM project_board),
        pName,pSubject,pContent,pPwd);
    COMMIT;
END;
```

- 목록 프로시저

```SQL
```

- 상세보기 프로시저

- 수정하기 프로시저

- 삭제하기 프로시저

- 찾아보기 프로시저

- 댓글 프로시저
