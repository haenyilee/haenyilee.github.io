---
sort:
---

# MVCstudy (4)

## 기본 셋팅
1. New Spring Legacy Project 생성
  - Spring MVC Project Templates 선택
  - 패키지 등록
2. Project Facets java 1.8버전으로 변경
  - 스프링 5.0버전을 사용하기 위함이다.
3. pom.xml properties 변경
  - [https://jeong-pro.tistory.com/168](참고)
4. 불필요한 폴더 및 파일 삭제
5. web.xml
  - 컨트롤러 
  - 인코딩
  - 환경 설정
6. WEB-INF에 config 폴더 생성
7. src/main/java에 dao 패키지 생성
  - dao패키지에는 데이터 관련 클래스가 들어감
  - web패키지에는 컨트롤러(모델)이 들어감

8. VO제작
9. config.xml과 mapper는 interface를 통해 만들 예정임


##

### RecipeMapper.java
- mapper 인터페이스 생성
- 레시피 데이터 조회하는 쿼리문장 작성하고 구현하는 메소드 지정하기
  - `@Select` 어노테이션을 사용한다.
  - resultType과 parameterType은 메소드에 따라 자동으로 구현된다.  

```java
@Select("SELECT no,title,chef,poster,num "
			+ "FROM (SELECT no,title,chef,poster,rownum as num "
			+ "FROM (SELECT no,title,chef,poster "
			+ "FROM recipe)) "
			+ "WHERE num BETWEEN #{start} AND #{end}")
	// 구현하는 메소드 지정
	public List<RecipeVO> recipeListData(Map map);
```

### RecipeDAO.java

- `@Repository` : 어노테이션으로 메모리 할당 요청하기
- `@Autowired` : mapper는 할당된 메모리 주소 받기 


```tip
- 스프링에서 어노테이션은 xml의 역할을 대체한다.
- 이를 통해 순수 자바를 통한 코딩 구현을 가능하게 한다.
```

```java
@Repository
public class RecipeDAO {
	
	@Autowired
	private RecipeMapper mapper;
	
	public List<RecipeVO> recipeListData(Map map)
	{
		return mapper.recipeListData(map);
	}
}
```




```note
**스프링에서 어노테이션으로 메모리 할당 요청하기**
- `@Controller` : Model클래스
  - return시 반드시 jsp파일명, `.do`를 반환해야 함
  - 화면을 변경하고 이동할 때 사용함
  
- `@RestController` : Model클래스
  - 화면 변경이 아닌 경우 사용한다.
  - 스크립트, XML , JSON을 반환함
  - 리액트를 연결할 때 주로 사용한다.
  
- `@Repository` : DAO
  - 저장소(데이터베이스 관련)
  - DAO등록할 때 주로 사용한다.
  
- `@Service` : DAO+DAO+...
  - DAO 여러개를 조립해서 사용할 때 사용한다.
  
- `@Component` : 외부 데이터
  - JSOUP , 뉴스 , OpenAPI를 받아올 때 주로 사용한다.
```




```warning
**면접 기출 : @Repository vs @Service**
- `@Repository` : DAO
  - 저장소(데이터베이스 관련)
  - DAO등록할 때 주로 사용한다.
  
- `@Service` : DAO+DAO+...
  - DAO 여러개를 조립해서 사용할 때 사용한다.
```




```note
**스프링에서 어노테이션으로 할당된 메모리 주소 받기**
- `@Autowired` : 스프링 내부에서 찾아 자동으로 주입한다.
- `@Resource` : 프로그래머가 요청
  - 반드시 id명을 사용한다.
```


### application-context.xml

- config 폴더에 new java bean configuration File 등록
